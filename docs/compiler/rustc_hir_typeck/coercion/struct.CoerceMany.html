<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="CoerceMany encapsulates the pattern you should use when you have many expressions that are all getting coerced to a common type. This arises, for example, when you have a match (the result of each arm is coerced to a common type). It also arises in less obvious places, such as when you have many `break foo` expressions that target the same loop, or the various `return` expressions in a function."><title>CoerceMany in rustc_hir_typeck::coercion - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-47e7ab555ef2818a.css" id="mainThemeStyle"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="rustc_hir_typeck" data-themes="" data-resource-suffix="" data-rustdoc-version="1.74.0-nightly (58eefc33a 2023-08-24)" data-channel="nightly" data-search-js="search-6dfdfced5eff6596.js" data-settings-js="settings-de11bff964e9d4e5.js" data-settings-css="settings-8c76f75bfb6bd192.css" data-theme-light-css="light-b2d31d2efc7e9b67.css" data-theme-dark-css="dark-3388a2fb2ef8066b.css" data-theme-ayu-css="ayu-8c3c66a6cf12cb2f.css" ><script src="../../static.files/storage-db41da1a38ea3cb8.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-ef3a2de404864b0b.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../../static.files/light-b2d31d2efc7e9b67.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../../static.files/dark-3388a2fb2ef8066b.css"><link rel="stylesheet" href="../../static.files/noscript-cffde32267a19fd6.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc struct"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../../rustc_hir_typeck/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../../rustc_hir_typeck/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">CoerceMany</a></h2><div class="sidebar-elems"><section><h3><a href="#fields">Fields</a></h3><ul class="block"><li><a href="#structfield.expected_ty">expected_ty</a></li><li><a href="#structfield.expressions">expressions</a></li><li><a href="#structfield.final_ty">final_ty</a></li><li><a href="#structfield.pushed">pushed</a></li></ul><h3><a href="#implementations">Methods</a></h3><ul class="block"><li><a href="#method.coerce">coerce</a></li><li><a href="#method.coerce_forced_unit">coerce_forced_unit</a></li><li><a href="#method.coerce_inner">coerce_inner</a></li><li><a href="#method.complete">complete</a></li><li><a href="#method.expected_ty">expected_ty</a></li><li><a href="#method.is_return_ty_definitely_unsized">is_return_ty_definitely_unsized</a></li><li><a href="#method.make">make</a></li><li><a href="#method.merged_ty">merged_ty</a></li><li><a href="#method.new">new</a></li><li><a href="#method.note_unreachable_loop_return">note_unreachable_loop_return</a></li><li><a href="#method.report_return_mismatched_types">report_return_mismatched_types</a></li><li><a href="#method.with_coercion_sites">with_coercion_sites</a></li></ul><h3><a href="#synthetic-implementations">Auto Trait Implementations</a></h3><ul class="block"><li><a href="#impl-RefUnwindSafe-for-CoerceMany%3C'tcx,+'exprs,+E%3E">!RefUnwindSafe</a></li><li><a href="#impl-Send-for-CoerceMany%3C'tcx,+'exprs,+E%3E">!Send</a></li><li><a href="#impl-Sync-for-CoerceMany%3C'tcx,+'exprs,+E%3E">!Sync</a></li><li><a href="#impl-UnwindSafe-for-CoerceMany%3C'tcx,+'exprs,+E%3E">!UnwindSafe</a></li><li><a href="#impl-Unpin-for-CoerceMany%3C'tcx,+'exprs,+E%3E">Unpin</a></li></ul><h3><a href="#blanket-implementations">Blanket Implementations</a></h3><ul class="block"><li><a href="#impl-Any-for-CoerceMany%3C'tcx,+'exprs,+E%3E">Any</a></li><li><a href="#impl-Borrow%3CT%3E-for-CoerceMany%3C'tcx,+'exprs,+E%3E">Borrow&lt;T&gt;</a></li><li><a href="#impl-BorrowMut%3CT%3E-for-CoerceMany%3C'tcx,+'exprs,+E%3E">BorrowMut&lt;T&gt;</a></li><li><a href="#impl-From%3CT%3E-for-CoerceMany%3C'tcx,+'exprs,+E%3E">From&lt;T&gt;</a></li><li><a href="#impl-Into%3CU%3E-for-CoerceMany%3C'tcx,+'exprs,+E%3E">Into&lt;U&gt;</a></li><li><a href="#impl-TryFrom%3CU%3E-for-CoerceMany%3C'tcx,+'exprs,+E%3E">TryFrom&lt;U&gt;</a></li><li><a href="#impl-TryInto%3CU%3E-for-CoerceMany%3C'tcx,+'exprs,+E%3E">TryInto&lt;U&gt;</a></li></ul></section><h2><a href="index.html">In rustc_hir_typeck::coercion</a></h2></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Struct <a href="../index.html">rustc_hir_typeck</a>::<wbr><a href="index.html">coercion</a>::<wbr><a class="struct" href="#">CoerceMany</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../../src/rustc_hir_typeck/coercion.rs.html#1361-1366">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub struct CoerceMany&lt;'tcx, 'exprs, E: <a class="trait" href="trait.AsCoercionSite.html" title="trait rustc_hir_typeck::coercion::AsCoercionSite">AsCoercionSite</a>&gt; {
    expected_ty: <a class="struct" href="../../rustc_middle/ty/struct.Ty.html" title="struct rustc_middle::ty::Ty">Ty</a>&lt;'tcx&gt;,
    final_ty: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../../rustc_middle/ty/struct.Ty.html" title="struct rustc_middle::ty::Ty">Ty</a>&lt;'tcx&gt;&gt;,
    expressions: <a class="enum" href="enum.Expressions.html" title="enum rustc_hir_typeck::coercion::Expressions">Expressions</a>&lt;'tcx, 'exprs, E&gt;,
    pushed: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>,
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>CoerceMany encapsulates the pattern you should use when you have
many expressions that are all getting coerced to a common
type. This arises, for example, when you have a match (the result
of each arm is coerced to a common type). It also arises in less
obvious places, such as when you have many <code>break foo</code> expressions
that target the same loop, or the various <code>return</code> expressions in
a function.</p>
<p>The basic protocol is as follows:</p>
<ul>
<li>Instantiate the <code>CoerceMany</code> with an initial <code>expected_ty</code>.
This will also serve as the “starting LUB”. The expectation is
that this type is something which all of the expressions <em>must</em>
be coercible to. Use a fresh type variable if needed.</li>
<li>For each expression whose result is to be coerced, invoke <code>coerce()</code> with.
<ul>
<li>In some cases we wish to coerce “non-expressions” whose types are implicitly
unit. This happens for example if you have a <code>break</code> with no expression,
or an <code>if</code> with no <code>else</code>. In that case, invoke <code>coerce_forced_unit()</code>.</li>
<li><code>coerce()</code> and <code>coerce_forced_unit()</code> may report errors. They hide this
from you so that you don’t have to worry your pretty head about it.
But if an error is reported, the final type will be <code>err</code>.</li>
<li>Invoking <code>coerce()</code> may cause us to go and adjust the “adjustments” on
previously coerced expressions.</li>
</ul>
</li>
<li>When all done, invoke <code>complete()</code>. This will return the LUB of
all your expressions.
<ul>
<li>WARNING: I don’t believe this final type is guaranteed to be
related to your initial <code>expected_ty</code> in any particular way,
although it will typically be a subtype, so you should check it.</li>
<li>Invoking <code>complete()</code> may cause us to go and adjust the “adjustments” on
previously coerced expressions.</li>
</ul>
</li>
</ul>
<p>Example:</p>

<div class="example-wrap ignore"><a href="#" class="tooltip" title="This example is not tested">ⓘ</a><pre class="rust rust-example-rendered"><code><span class="kw">let </span><span class="kw-2">mut </span>coerce = CoerceMany::new(expected_ty);
<span class="kw">for </span>expr <span class="kw">in </span>exprs {
    <span class="kw">let </span>expr_ty = fcx.check_expr_with_expectation(expr, expected);
    coerce.coerce(fcx, <span class="kw-2">&amp;</span>cause, expr, expr_ty);
}
<span class="kw">let </span>final_ty = coerce.complete(fcx);</code></pre></div>
</div></details><h2 id="fields" class="fields small-section-header">Fields<a href="#fields" class="anchor">§</a></h2><span id="structfield.expected_ty" class="structfield small-section-header"><a href="#structfield.expected_ty" class="anchor field">§</a><code>expected_ty: <a class="struct" href="../../rustc_middle/ty/struct.Ty.html" title="struct rustc_middle::ty::Ty">Ty</a>&lt;'tcx&gt;</code></span><span id="structfield.final_ty" class="structfield small-section-header"><a href="#structfield.final_ty" class="anchor field">§</a><code>final_ty: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../../rustc_middle/ty/struct.Ty.html" title="struct rustc_middle::ty::Ty">Ty</a>&lt;'tcx&gt;&gt;</code></span><span id="structfield.expressions" class="structfield small-section-header"><a href="#structfield.expressions" class="anchor field">§</a><code>expressions: <a class="enum" href="enum.Expressions.html" title="enum rustc_hir_typeck::coercion::Expressions">Expressions</a>&lt;'tcx, 'exprs, E&gt;</code></span><span id="structfield.pushed" class="structfield small-section-header"><a href="#structfield.pushed" class="anchor field">§</a><code>pushed: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a></code></span><h2 id="implementations" class="small-section-header">Implementations<a href="#implementations" class="anchor">§</a></h2><div id="implementations-list"><details class="toggle implementors-toggle" open><summary><section id="impl-CoerceMany%3C'tcx,+'exprs,+E%3E" class="impl"><a class="src rightside" href="../../src/rustc_hir_typeck/coercion.rs.html#1377-1842">source</a><a href="#impl-CoerceMany%3C'tcx,+'exprs,+E%3E" class="anchor">§</a><h3 class="code-header">impl&lt;'tcx, 'exprs, E: <a class="trait" href="trait.AsCoercionSite.html" title="trait rustc_hir_typeck::coercion::AsCoercionSite">AsCoercionSite</a>&gt; <a class="struct" href="struct.CoerceMany.html" title="struct rustc_hir_typeck::coercion::CoerceMany">CoerceMany</a>&lt;'tcx, 'exprs, E&gt;</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.new" class="method"><a class="src rightside" href="../../src/rustc_hir_typeck/coercion.rs.html#1381-1383">source</a><h4 class="code-header">pub fn <a href="#method.new" class="fn">new</a>(expected_ty: <a class="struct" href="../../rustc_middle/ty/struct.Ty.html" title="struct rustc_middle::ty::Ty">Ty</a>&lt;'tcx&gt;) -&gt; Self</h4></section></summary><div class="docblock"><p>The usual case; collect the set of expressions dynamically.
If the full set of coercion sites is known before hand,
consider <code>with_coercion_sites()</code> instead to avoid allocation.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.with_coercion_sites" class="method"><a class="src rightside" href="../../src/rustc_hir_typeck/coercion.rs.html#1390-1392">source</a><h4 class="code-header">pub fn <a href="#method.with_coercion_sites" class="fn">with_coercion_sites</a>(
    expected_ty: <a class="struct" href="../../rustc_middle/ty/struct.Ty.html" title="struct rustc_middle::ty::Ty">Ty</a>&lt;'tcx&gt;,
    coercion_sites: &amp;'exprs <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">[E]</a>
) -&gt; Self</h4></section></summary><div class="docblock"><p>As an optimization, you can create a <code>CoerceMany</code> with a
preexisting slice of expressions. In this case, you are
expected to pass each element in the slice to <code>coerce(...)</code> in
order. This is used with arrays in particular to avoid
needlessly cloning the slice.</p>
</div></details><section id="method.make" class="method"><a class="src rightside" href="../../src/rustc_hir_typeck/coercion.rs.html#1394-1396">source</a><h4 class="code-header">fn <a href="#method.make" class="fn">make</a>(
    expected_ty: <a class="struct" href="../../rustc_middle/ty/struct.Ty.html" title="struct rustc_middle::ty::Ty">Ty</a>&lt;'tcx&gt;,
    expressions: <a class="enum" href="enum.Expressions.html" title="enum rustc_hir_typeck::coercion::Expressions">Expressions</a>&lt;'tcx, 'exprs, E&gt;
) -&gt; Self</h4></section><details class="toggle method-toggle" open><summary><section id="method.expected_ty" class="method"><a class="src rightside" href="../../src/rustc_hir_typeck/coercion.rs.html#1406-1408">source</a><h4 class="code-header">pub fn <a href="#method.expected_ty" class="fn">expected_ty</a>(&amp;self) -&gt; <a class="struct" href="../../rustc_middle/ty/struct.Ty.html" title="struct rustc_middle::ty::Ty">Ty</a>&lt;'tcx&gt;</h4></section></summary><div class="docblock"><p>Returns the “expected type” with which this coercion was
constructed. This represents the “downward propagated” type
that was given to us at the start of typing whatever construct
we are typing (e.g., the match expression).</p>
<p>Typically, this is used as the expected type when
type-checking each of the alternative expressions whose types
we are trying to merge.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.merged_ty" class="method"><a class="src rightside" href="../../src/rustc_hir_typeck/coercion.rs.html#1414-1416">source</a><h4 class="code-header">pub fn <a href="#method.merged_ty" class="fn">merged_ty</a>(&amp;self) -&gt; <a class="struct" href="../../rustc_middle/ty/struct.Ty.html" title="struct rustc_middle::ty::Ty">Ty</a>&lt;'tcx&gt;</h4></section></summary><div class="docblock"><p>Returns the current “merged type”, representing our best-guess
at the LUB of the expressions we’ve seen so far (if any). This
isn’t <em>final</em> until you call <code>self.complete()</code>, which will return
the merged type.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.coerce" class="method"><a class="src rightside" href="../../src/rustc_hir_typeck/coercion.rs.html#1423-1431">source</a><h4 class="code-header">pub fn <a href="#method.coerce" class="fn">coerce</a>&lt;'a&gt;(
    &amp;mut self,
    fcx: &amp;<a class="struct" href="../fn_ctxt/struct.FnCtxt.html" title="struct rustc_hir_typeck::fn_ctxt::FnCtxt">FnCtxt</a>&lt;'a, 'tcx&gt;,
    cause: &amp;<a class="struct" href="../../rustc_middle/traits/struct.ObligationCause.html" title="struct rustc_middle::traits::ObligationCause">ObligationCause</a>&lt;'tcx&gt;,
    expression: &amp;'tcx <a class="struct" href="../../rustc_hir/hir/struct.Expr.html" title="struct rustc_hir::hir::Expr">Expr</a>&lt;'tcx&gt;,
    expression_ty: <a class="struct" href="../../rustc_middle/ty/struct.Ty.html" title="struct rustc_middle::ty::Ty">Ty</a>&lt;'tcx&gt;
)</h4></section></summary><div class="docblock"><p>Indicates that the value generated by <code>expression</code>, which is
of type <code>expression_ty</code>, is one of the possibilities that we
could coerce from. This will record <code>expression</code>, and later
calls to <code>coerce</code> may come back and add adjustments and things
if necessary.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.coerce_forced_unit" class="method"><a class="src rightside" href="../../src/rustc_hir_typeck/coercion.rs.html#1445-1460">source</a><h4 class="code-header">pub fn <a href="#method.coerce_forced_unit" class="fn">coerce_forced_unit</a>&lt;'a&gt;(
    &amp;mut self,
    fcx: &amp;<a class="struct" href="../fn_ctxt/struct.FnCtxt.html" title="struct rustc_hir_typeck::fn_ctxt::FnCtxt">FnCtxt</a>&lt;'a, 'tcx&gt;,
    cause: &amp;<a class="struct" href="../../rustc_middle/traits/struct.ObligationCause.html" title="struct rustc_middle::traits::ObligationCause">ObligationCause</a>&lt;'tcx&gt;,
    augment_error: impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.FnOnce.html" title="trait core::ops::function::FnOnce">FnOnce</a>(&amp;mut <a class="struct" href="../../rustc_errors/diagnostic/struct.Diagnostic.html" title="struct rustc_errors::diagnostic::Diagnostic">Diagnostic</a>),
    label_unit_as_expected: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>
)</h4></section></summary><div class="docblock"><p>Indicates that one of the inputs is a “forced unit”. This
occurs in a case like <code>if foo { ... };</code>, where the missing else
generates a “forced unit”. Another example is a <code>loop { break; }</code>, where the <code>break</code> has no argument expression. We treat
these cases slightly differently for error-reporting
purposes. Note that these tend to correspond to cases where
the <code>()</code> expression is implicit in the source, and hence we do
not take an expression argument.</p>
<p>The <code>augment_error</code> gives you a chance to extend the error
message, in case any results (e.g., we use this to suggest
removing a <code>;</code>).</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.coerce_inner" class="method"><a class="src rightside" href="../../src/rustc_hir_typeck/coercion.rs.html#1465">source</a><h4 class="code-header">pub(crate) fn <a href="#method.coerce_inner" class="fn">coerce_inner</a>&lt;'a&gt;(
    &amp;mut self,
    fcx: &amp;<a class="struct" href="../fn_ctxt/struct.FnCtxt.html" title="struct rustc_hir_typeck::fn_ctxt::FnCtxt">FnCtxt</a>&lt;'a, 'tcx&gt;,
    cause: &amp;<a class="struct" href="../../rustc_middle/traits/struct.ObligationCause.html" title="struct rustc_middle::traits::ObligationCause">ObligationCause</a>&lt;'tcx&gt;,
    expression: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;&amp;'tcx <a class="struct" href="../../rustc_hir/hir/struct.Expr.html" title="struct rustc_hir::hir::Expr">Expr</a>&lt;'tcx&gt;&gt;,
    expression_ty: <a class="struct" href="../../rustc_middle/ty/struct.Ty.html" title="struct rustc_middle::ty::Ty">Ty</a>&lt;'tcx&gt;,
    augment_error: impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.FnOnce.html" title="trait core::ops::function::FnOnce">FnOnce</a>(&amp;mut <a class="struct" href="../../rustc_errors/diagnostic/struct.Diagnostic.html" title="struct rustc_errors::diagnostic::Diagnostic">Diagnostic</a>),
    label_expression_as_expected: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>
)</h4></section></summary><div class="docblock"><p>The inner coercion “engine”. If <code>expression</code> is <code>None</code>, this
is a forced-unit case, and hence <code>expression_ty</code> must be
<code>Nil</code>.</p>
</div></details><section id="method.note_unreachable_loop_return" class="method"><a class="src rightside" href="../../src/rustc_hir_typeck/coercion.rs.html#1675-1708">source</a><h4 class="code-header">fn <a href="#method.note_unreachable_loop_return" class="fn">note_unreachable_loop_return</a>(
    &amp;self,
    err: &amp;mut <a class="struct" href="../../rustc_errors/diagnostic/struct.Diagnostic.html" title="struct rustc_errors::diagnostic::Diagnostic">Diagnostic</a>,
    expr: &amp;<a class="struct" href="../../rustc_hir/hir/struct.Expr.html" title="struct rustc_hir::hir::Expr">Expr</a>&lt;'tcx&gt;,
    ret_exprs: &amp;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;&amp;'tcx <a class="struct" href="../../rustc_hir/hir/struct.Expr.html" title="struct rustc_hir::hir::Expr">Expr</a>&lt;'tcx&gt;&gt;
)</h4></section><section id="method.report_return_mismatched_types" class="method"><a class="src rightside" href="../../src/rustc_hir_typeck/coercion.rs.html#1710-1810">source</a><h4 class="code-header">fn <a href="#method.report_return_mismatched_types" class="fn">report_return_mismatched_types</a>&lt;'a&gt;(
    &amp;self,
    cause: &amp;<a class="struct" href="../../rustc_middle/traits/struct.ObligationCause.html" title="struct rustc_middle::traits::ObligationCause">ObligationCause</a>&lt;'tcx&gt;,
    expected: <a class="struct" href="../../rustc_middle/ty/struct.Ty.html" title="struct rustc_middle::ty::Ty">Ty</a>&lt;'tcx&gt;,
    found: <a class="struct" href="../../rustc_middle/ty/struct.Ty.html" title="struct rustc_middle::ty::Ty">Ty</a>&lt;'tcx&gt;,
    ty_err: <a class="enum" href="../../rustc_middle/ty/error/enum.TypeError.html" title="enum rustc_middle::ty::error::TypeError">TypeError</a>&lt;'tcx&gt;,
    fcx: &amp;<a class="struct" href="../fn_ctxt/struct.FnCtxt.html" title="struct rustc_hir_typeck::fn_ctxt::FnCtxt">FnCtxt</a>&lt;'a, 'tcx&gt;,
    id: <a class="struct" href="../../rustc_hir/hir_id/struct.HirId.html" title="struct rustc_hir::hir_id::HirId">HirId</a>,
    expression: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;&amp;'tcx <a class="struct" href="../../rustc_hir/hir/struct.Expr.html" title="struct rustc_hir::hir::Expr">Expr</a>&lt;'tcx&gt;&gt;,
    blk_id: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../../rustc_hir/hir_id/struct.HirId.html" title="struct rustc_hir::hir_id::HirId">HirId</a>&gt;
) -&gt; <a class="struct" href="../../rustc_errors/diagnostic_builder/struct.DiagnosticBuilder.html" title="struct rustc_errors::diagnostic_builder::DiagnosticBuilder">DiagnosticBuilder</a>&lt;'a, <a class="struct" href="../../rustc_span/struct.ErrorGuaranteed.html" title="struct rustc_span::ErrorGuaranteed">ErrorGuaranteed</a>&gt;</h4></section><details class="toggle method-toggle" open><summary><section id="method.is_return_ty_definitely_unsized" class="method"><a class="src rightside" href="../../src/rustc_hir_typeck/coercion.rs.html#1815-1830">source</a><h4 class="code-header">fn <a href="#method.is_return_ty_definitely_unsized" class="fn">is_return_ty_definitely_unsized</a>(&amp;self, fcx: &amp;<a class="struct" href="../fn_ctxt/struct.FnCtxt.html" title="struct rustc_hir_typeck::fn_ctxt::FnCtxt">FnCtxt</a>&lt;'_, 'tcx&gt;) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a></h4></section></summary><div class="docblock"><p>Checks whether the return type is unsized via an obligation, which makes
sure we consider <code>dyn Trait: Sized</code> where clauses, which are trivially
false but technically valid for typeck.</p>
</div></details><section id="method.complete" class="method"><a class="src rightside" href="../../src/rustc_hir_typeck/coercion.rs.html#1832-1841">source</a><h4 class="code-header">pub fn <a href="#method.complete" class="fn">complete</a>&lt;'a&gt;(self, fcx: &amp;<a class="struct" href="../fn_ctxt/struct.FnCtxt.html" title="struct rustc_hir_typeck::fn_ctxt::FnCtxt">FnCtxt</a>&lt;'a, 'tcx&gt;) -&gt; <a class="struct" href="../../rustc_middle/ty/struct.Ty.html" title="struct rustc_middle::ty::Ty">Ty</a>&lt;'tcx&gt;</h4></section></div></details></div><h2 id="synthetic-implementations" class="small-section-header">Auto Trait Implementations<a href="#synthetic-implementations" class="anchor">§</a></h2><div id="synthetic-implementations-list"><section id="impl-RefUnwindSafe-for-CoerceMany%3C'tcx,+'exprs,+E%3E" class="impl"><a href="#impl-RefUnwindSafe-for-CoerceMany%3C'tcx,+'exprs,+E%3E" class="anchor">§</a><h3 class="code-header">impl&lt;'tcx, 'exprs, E&gt; !<a class="trait" href="https://doc.rust-lang.org/nightly/core/panic/unwind_safe/trait.RefUnwindSafe.html" title="trait core::panic::unwind_safe::RefUnwindSafe">RefUnwindSafe</a> for <a class="struct" href="struct.CoerceMany.html" title="struct rustc_hir_typeck::coercion::CoerceMany">CoerceMany</a>&lt;'tcx, 'exprs, E&gt;</h3></section><section id="impl-Send-for-CoerceMany%3C'tcx,+'exprs,+E%3E" class="impl"><a href="#impl-Send-for-CoerceMany%3C'tcx,+'exprs,+E%3E" class="anchor">§</a><h3 class="code-header">impl&lt;'tcx, 'exprs, E&gt; !<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> for <a class="struct" href="struct.CoerceMany.html" title="struct rustc_hir_typeck::coercion::CoerceMany">CoerceMany</a>&lt;'tcx, 'exprs, E&gt;</h3></section><section id="impl-Sync-for-CoerceMany%3C'tcx,+'exprs,+E%3E" class="impl"><a href="#impl-Sync-for-CoerceMany%3C'tcx,+'exprs,+E%3E" class="anchor">§</a><h3 class="code-header">impl&lt;'tcx, 'exprs, E&gt; !<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> for <a class="struct" href="struct.CoerceMany.html" title="struct rustc_hir_typeck::coercion::CoerceMany">CoerceMany</a>&lt;'tcx, 'exprs, E&gt;</h3></section><section id="impl-Unpin-for-CoerceMany%3C'tcx,+'exprs,+E%3E" class="impl"><a href="#impl-Unpin-for-CoerceMany%3C'tcx,+'exprs,+E%3E" class="anchor">§</a><h3 class="code-header">impl&lt;'tcx, 'exprs, E&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a> for <a class="struct" href="struct.CoerceMany.html" title="struct rustc_hir_typeck::coercion::CoerceMany">CoerceMany</a>&lt;'tcx, 'exprs, E&gt;</h3></section><section id="impl-UnwindSafe-for-CoerceMany%3C'tcx,+'exprs,+E%3E" class="impl"><a href="#impl-UnwindSafe-for-CoerceMany%3C'tcx,+'exprs,+E%3E" class="anchor">§</a><h3 class="code-header">impl&lt;'tcx, 'exprs, E&gt; !<a class="trait" href="https://doc.rust-lang.org/nightly/core/panic/unwind_safe/trait.UnwindSafe.html" title="trait core::panic::unwind_safe::UnwindSafe">UnwindSafe</a> for <a class="struct" href="struct.CoerceMany.html" title="struct rustc_hir_typeck::coercion::CoerceMany">CoerceMany</a>&lt;'tcx, 'exprs, E&gt;</h3></section></div><h2 id="blanket-implementations" class="small-section-header">Blanket Implementations<a href="#blanket-implementations" class="anchor">§</a></h2><div id="blanket-implementations-list"><details class="toggle implementors-toggle"><summary><section id="impl-Any-for-CoerceMany%3C'tcx,+'exprs,+E%3E" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/nightly/src/core/any.rs.html#135">source</a><a href="#impl-Any-for-CoerceMany%3C'tcx,+'exprs,+E%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/any/trait.Any.html" title="trait core::any::Any">Any</a> for T<span class="where fmt-newline">where
    T: 'static + ?<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</span></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.type_id" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/nightly/src/core/any.rs.html#136">source</a><a href="#method.type_id" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/any/trait.Any.html#tymethod.type_id" class="fn">type_id</a>(&amp;self) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/core/any/struct.TypeId.html" title="struct core::any::TypeId">TypeId</a></h4></section></summary><div class='docblock'>Gets the <code>TypeId</code> of <code>self</code>. <a href="https://doc.rust-lang.org/nightly/core/any/trait.Any.html#tymethod.type_id">Read more</a></div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-Borrow%3CT%3E-for-CoerceMany%3C'tcx,+'exprs,+E%3E" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#208">source</a><a href="#impl-Borrow%3CT%3E-for-CoerceMany%3C'tcx,+'exprs,+E%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/borrow/trait.Borrow.html" title="trait core::borrow::Borrow">Borrow</a>&lt;T&gt; for T<span class="where fmt-newline">where
    T: ?<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</span></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.borrow" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#210">source</a><a href="#method.borrow" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/borrow/trait.Borrow.html#tymethod.borrow" class="fn">borrow</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;T</a></h4></section></summary><div class='docblock'>Immutably borrows from an owned value. <a href="https://doc.rust-lang.org/nightly/core/borrow/trait.Borrow.html#tymethod.borrow">Read more</a></div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-BorrowMut%3CT%3E-for-CoerceMany%3C'tcx,+'exprs,+E%3E" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#216">source</a><a href="#impl-BorrowMut%3CT%3E-for-CoerceMany%3C'tcx,+'exprs,+E%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/borrow/trait.BorrowMut.html" title="trait core::borrow::BorrowMut">BorrowMut</a>&lt;T&gt; for T<span class="where fmt-newline">where
    T: ?<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</span></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.borrow_mut" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#217">source</a><a href="#method.borrow_mut" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/borrow/trait.BorrowMut.html#tymethod.borrow_mut" class="fn">borrow_mut</a>(&amp;mut self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;mut T</a></h4></section></summary><div class='docblock'>Mutably borrows from an owned value. <a href="https://doc.rust-lang.org/nightly/core/borrow/trait.BorrowMut.html#tymethod.borrow_mut">Read more</a></div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-From%3CT%3E-for-CoerceMany%3C'tcx,+'exprs,+E%3E" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#722">source</a><a href="#impl-From%3CT%3E-for-CoerceMany%3C'tcx,+'exprs,+E%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt; for T</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.from" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#725">source</a><a href="#method.from" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html#tymethod.from" class="fn">from</a>(t: T) -&gt; T</h4></section></summary><div class="docblock"><p>Returns the argument unchanged.</p>
</div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-Into%3CU%3E-for-CoerceMany%3C'tcx,+'exprs,+E%3E" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#706">source</a><a href="#impl-Into%3CU%3E-for-CoerceMany%3C'tcx,+'exprs,+E%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;U&gt; for T<span class="where fmt-newline">where
    U: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt;,</span></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.into" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#715">source</a><a href="#method.into" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html#tymethod.into" class="fn">into</a>(self) -&gt; U</h4></section></summary><div class="docblock"><p>Calls <code>U::from(self)</code>.</p>
<p>That is, this conversion is whatever the implementation of
<code><a href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt; for U</code> chooses to do.</p>
</div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-TryFrom%3CU%3E-for-CoerceMany%3C'tcx,+'exprs,+E%3E" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#762">source</a><a href="#impl-TryFrom%3CU%3E-for-CoerceMany%3C'tcx,+'exprs,+E%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt; for T<span class="where fmt-newline">where
    U: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;T&gt;,</span></h3></section></summary><div class="impl-items"><details class="toggle" open><summary><section id="associatedtype.Error-1" class="associatedtype trait-impl"><a href="#associatedtype.Error-1" class="anchor">§</a><h4 class="code-header">type <a href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error" class="associatedtype">Error</a> = <a class="enum" href="https://doc.rust-lang.org/nightly/core/convert/enum.Infallible.html" title="enum core::convert::Infallible">Infallible</a></h4></section></summary><div class='docblock'>The type returned in the event of a conversion error.</div></details><details class="toggle method-toggle" open><summary><section id="method.try_from" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#769">source</a><a href="#method.try_from" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#tymethod.try_from" class="fn">try_from</a>(value: U) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;T, &lt;T as <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</h4></section></summary><div class='docblock'>Performs the conversion.</div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-TryInto%3CU%3E-for-CoerceMany%3C'tcx,+'exprs,+E%3E" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#747">source</a><a href="#impl-TryInto%3CU%3E-for-CoerceMany%3C'tcx,+'exprs,+E%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryInto.html" title="trait core::convert::TryInto">TryInto</a>&lt;U&gt; for T<span class="where fmt-newline">where
    U: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;,</span></h3></section></summary><div class="impl-items"><details class="toggle" open><summary><section id="associatedtype.Error" class="associatedtype trait-impl"><a href="#associatedtype.Error" class="anchor">§</a><h4 class="code-header">type <a href="https://doc.rust-lang.org/nightly/core/convert/trait.TryInto.html#associatedtype.Error" class="associatedtype">Error</a> = &lt;U as <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a></h4></section></summary><div class='docblock'>The type returned in the event of a conversion error.</div></details><details class="toggle method-toggle" open><summary><section id="method.try_into" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#754">source</a><a href="#method.try_into" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/convert/trait.TryInto.html#tymethod.try_into" class="fn">try_into</a>(self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;U, &lt;U as <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</h4></section></summary><div class='docblock'>Performs the conversion.</div></details></div></details></div><h2 id="layout" class="small-section-header">Layout<a href="#layout" class="anchor">§</a></h2><div class="docblock"><div class="warning"><p><strong>Note:</strong> Most layout information is <strong>completely unstable</strong> and may even differ between compilations. The only exception is types with certain <code>repr(...)</code> attributes. Please see the Rust Reference’s <a href="https://doc.rust-lang.org/reference/type-layout.html">“Type Layout”</a> chapter for details on type layout guarantees.</p></div><p><strong>Size:</strong>48 bytes</p></div></section></div></main></body></html>