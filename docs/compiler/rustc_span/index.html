<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Source positions and related helper functions."><title>rustc_span - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-47e7ab555ef2818a.css" id="mainThemeStyle"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="rustc_span" data-themes="" data-resource-suffix="" data-rustdoc-version="1.74.0-nightly (58eefc33a 2023-08-24)" data-channel="nightly" data-search-js="search-6dfdfced5eff6596.js" data-settings-js="settings-de11bff964e9d4e5.js" data-settings-css="settings-8c76f75bfb6bd192.css" data-theme-light-css="light-b2d31d2efc7e9b67.css" data-theme-dark-css="dark-3388a2fb2ef8066b.css" data-theme-ayu-css="ayu-8c3c66a6cf12cb2f.css" ><script src="../static.files/storage-db41da1a38ea3cb8.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-ef3a2de404864b0b.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../static.files/light-b2d31d2efc7e9b67.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../static.files/dark-3388a2fb2ef8066b.css"><link rel="stylesheet" href="../static.files/noscript-cffde32267a19fd6.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../rustc_span/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../rustc_span/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Crate rustc_span</a></h2><div class="sidebar-elems"><ul class="block"><li class="version">Version 1.74.0-nightly	(58eefc33a	2023-08-24)</li><li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#reexports">Re-exports</a></li><li><a href="#modules">Modules</a></li><li><a href="#macros">Macros</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#constants">Constants</a></li><li><a href="#statics">Statics</a></li><li><a href="#traits">Traits</a></li><li><a href="#functions">Functions</a></li><li><a href="#types">Type Aliases</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a class="mod" href="#">rustc_span</a><button id="copy-path" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../src/rustc_span/lib.rs.html#1-2238">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Source positions and related helper functions.</p>
<p>Important concepts in this module include:</p>
<ul>
<li>the <em>span</em>, represented by <a href="struct.SpanData.html" title="struct rustc_span::SpanData"><code>SpanData</code></a> and related types;</li>
<li>source code as represented by a <a href="source_map/struct.SourceMap.html" title="struct rustc_span::source_map::SourceMap"><code>SourceMap</code></a>; and</li>
<li>interned strings, represented by <a href="symbol/struct.Symbol.html" title="struct rustc_span::symbol::Symbol"><code>Symbol</code></a>s, with some common symbols available statically in the <a href="symbol/sym/index.html" title="mod rustc_span::symbol::sym"><code>sym</code></a> module.</li>
</ul>
<p>Unlike most compilers, the span contains not only the position in the source code, but also various other metadata,
such as the edition and macro hygiene. This metadata is stored in <a href="hygiene/struct.SyntaxContext.html" title="struct rustc_span::hygiene::SyntaxContext"><code>SyntaxContext</code></a> and <a href="hygiene/struct.ExpnData.html" title="struct rustc_span::hygiene::ExpnData"><code>ExpnData</code></a>.</p>
<h3 id="note"><a href="#note">Note</a></h3>
<p>This API is completely unstable and subject to change.</p>
</div></details><h2 id="reexports" class="small-section-header"><a href="#reexports">Re-exports</a></h2><ul class="item-table"><li><div class="item-name" id="reexport.DesugaringKind"><code>pub use hygiene::<a class="enum" href="hygiene/enum.DesugaringKind.html" title="enum rustc_span::hygiene::DesugaringKind">DesugaringKind</a>;</code></div></li><li><div class="item-name" id="reexport.ExpnKind"><code>pub use hygiene::<a class="enum" href="hygiene/enum.ExpnKind.html" title="enum rustc_span::hygiene::ExpnKind">ExpnKind</a>;</code></div></li><li><div class="item-name" id="reexport.MacroKind"><code>pub use hygiene::<a class="enum" href="hygiene/enum.MacroKind.html" title="enum rustc_span::hygiene::MacroKind">MacroKind</a>;</code></div></li><li><div class="item-name" id="reexport.ExpnData"><code>pub use hygiene::<a class="struct" href="hygiene/struct.ExpnData.html" title="struct rustc_span::hygiene::ExpnData">ExpnData</a>;</code></div></li><li><div class="item-name" id="reexport.ExpnHash"><code>pub use hygiene::<a class="struct" href="hygiene/struct.ExpnHash.html" title="struct rustc_span::hygiene::ExpnHash">ExpnHash</a>;</code></div></li><li><div class="item-name" id="reexport.ExpnId"><code>pub use hygiene::<a class="struct" href="hygiene/struct.ExpnId.html" title="struct rustc_span::hygiene::ExpnId">ExpnId</a>;</code></div></li><li><div class="item-name" id="reexport.LocalExpnId"><code>pub use hygiene::<a class="struct" href="hygiene/struct.LocalExpnId.html" title="struct rustc_span::hygiene::LocalExpnId">LocalExpnId</a>;</code></div></li><li><div class="item-name" id="reexport.SyntaxContext"><code>pub use hygiene::<a class="struct" href="hygiene/struct.SyntaxContext.html" title="struct rustc_span::hygiene::SyntaxContext">SyntaxContext</a>;</code></div></li><li><div class="item-name" id="reexport.sym"><code>pub use symbol::<a class="mod" href="symbol/sym/index.html" title="mod rustc_span::symbol::sym">sym</a>;</code></div></li><li><div class="item-name" id="reexport.Symbol"><code>pub use symbol::<a class="struct" href="symbol/struct.Symbol.html" title="struct rustc_span::symbol::Symbol">Symbol</a>;</code></div></li></ul><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="analyze_source_file/index.html" title="mod rustc_span::analyze_source_file">analyze_source_file</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="mod" href="caching_source_map_view/index.html" title="mod rustc_span::caching_source_map_view">caching_source_map_view</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="mod" href="def_id/index.html" title="mod rustc_span::def_id">def_id</a></div></li><li><div class="item-name"><a class="mod" href="edit_distance/index.html" title="mod rustc_span::edit_distance">edit_distance</a></div><div class="desc docblock-short">Edit distances.</div></li><li><div class="item-name"><a class="mod" href="edition/index.html" title="mod rustc_span::edition">edition</a></div></li><li><div class="item-name"><a class="mod" href="fatal_error/index.html" title="mod rustc_span::fatal_error">fatal_error</a></div></li><li><div class="item-name"><a class="mod" href="hygiene/index.html" title="mod rustc_span::hygiene">hygiene</a></div><div class="desc docblock-short">Machinery for hygienic macros.</div></li><li><div class="item-name"><a class="mod" href="profiling/index.html" title="mod rustc_span::profiling">profiling</a></div></li><li><div class="item-name"><a class="mod" href="source_map/index.html" title="mod rustc_span::source_map">source_map</a></div><div class="desc docblock-short">Types for tracking pieces of source code within a crate.</div></li><li><div class="item-name"><a class="mod" href="span_encoding/index.html" title="mod rustc_span::span_encoding">span_encoding</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="mod" href="symbol/index.html" title="mod rustc_span::symbol">symbol</a></div><div class="desc docblock-short">An “interner” is a data structure that associates values with usize tags and
allows bidirectional lookup; i.e., given a value, one can easily find the
type, and vice versa.</div></li></ul><h2 id="macros" class="small-section-header"><a href="#macros">Macros</a></h2><ul class="item-table"><li><div class="item-name"><a class="macro" href="macro.impl_pos.html" title="macro rustc_span::impl_pos">impl_pos</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li></ul><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.BytePos.html" title="struct rustc_span::BytePos">BytePos</a></div><div class="desc docblock-short">A byte offset.</div></li><li><div class="item-name"><a class="struct" href="struct.CachingSourceMapView.html" title="struct rustc_span::CachingSourceMapView">CachingSourceMapView</a></div></li><li><div class="item-name"><a class="struct" href="struct.CharPos.html" title="struct rustc_span::CharPos">CharPos</a></div><div class="desc docblock-short">A character offset.</div></li><li><div class="item-name"><a class="struct" href="struct.DistinctSources.html" title="struct rustc_span::DistinctSources">DistinctSources</a></div></li><li><div class="item-name"><a class="struct" href="struct.ErrorGuaranteed.html" title="struct rustc_span::ErrorGuaranteed">ErrorGuaranteed</a></div><div class="desc docblock-short">Useful type to use with <code>Result&lt;&gt;</code> indicate that an error has already
been reported to the user, so no need to continue checking.</div></li><li><div class="item-name"><a class="struct" href="struct.FileLines.html" title="struct rustc_span::FileLines">FileLines</a></div></li><li><div class="item-name"><a class="struct" href="struct.FileNameDisplay.html" title="struct rustc_span::FileNameDisplay">FileNameDisplay</a></div></li><li><div class="item-name"><a class="struct" href="struct.InnerSpan.html" title="struct rustc_span::InnerSpan">InnerSpan</a></div><div class="desc docblock-short">Range inside of a <code>Span</code> used for diagnostics when we only have access to relative positions.</div></li><li><div class="item-name"><a class="struct" href="struct.LineInfo.html" title="struct rustc_span::LineInfo">LineInfo</a></div></li><li><div class="item-name"><a class="struct" href="struct.Loc.html" title="struct rustc_span::Loc">Loc</a></div><div class="desc docblock-short">A source code location used for error reporting.</div></li><li><div class="item-name"><a class="struct" href="struct.MalformedSourceMapPositions.html" title="struct rustc_span::MalformedSourceMapPositions">MalformedSourceMapPositions</a></div></li><li><div class="item-name"><a class="struct" href="struct.MultiByteChar.html" title="struct rustc_span::MultiByteChar">MultiByteChar</a></div><div class="desc docblock-short">Identifies an offset of a multi-byte character in a <code>SourceFile</code>.</div></li><li><div class="item-name"><a class="struct" href="struct.NormalizedPos.html" title="struct rustc_span::NormalizedPos">NormalizedPos</a></div><div class="desc docblock-short">Identifies an offset of a character that was normalized away from <code>SourceFile</code>.</div></li><li><div class="item-name"><a class="struct" href="struct.OffsetOverflowError.html" title="struct rustc_span::OffsetOverflowError">OffsetOverflowError</a></div></li><li><div class="item-name"><a class="struct" href="struct.SessionGlobals.html" title="struct rustc_span::SessionGlobals">SessionGlobals</a></div><div class="desc docblock-short">Per-session global variables: this struct is stored in thread-local storage
in such a way that it is accessible without any kind of handle to all
threads within the compilation session, but is not accessible outside the
session.</div></li><li><div class="item-name"><a class="struct" href="struct.SourceFile.html" title="struct rustc_span::SourceFile">SourceFile</a></div><div class="desc docblock-short">A single source in the <a href="source_map/struct.SourceMap.html" title="struct rustc_span::source_map::SourceMap"><code>SourceMap</code></a>.</div></li><li><div class="item-name"><a class="struct" href="struct.SourceFileAndBytePos.html" title="struct rustc_span::SourceFileAndBytePos">SourceFileAndBytePos</a></div></li><li><div class="item-name"><a class="struct" href="struct.SourceFileAndLine.html" title="struct rustc_span::SourceFileAndLine">SourceFileAndLine</a></div></li><li><div class="item-name"><a class="struct" href="struct.SourceFileDiffs.html" title="struct rustc_span::SourceFileDiffs">SourceFileDiffs</a></div><div class="desc docblock-short">The source file lines in difference list form. This matches the form
used within metadata, which saves space by exploiting the fact that the
lines list is sorted and individual lines are usually not that long.</div></li><li><div class="item-name"><a class="struct" href="struct.SourceFileHash.html" title="struct rustc_span::SourceFileHash">SourceFileHash</a></div><div class="desc docblock-short">The hash of the on-disk source file used for debug info.</div></li><li><div class="item-name"><a class="struct" href="struct.Span.html" title="struct rustc_span::Span">Span</a></div><div class="desc docblock-short">A compressed span.</div></li><li><div class="item-name"><a class="struct" href="struct.SpanData.html" title="struct rustc_span::SpanData">SpanData</a></div><div class="desc docblock-short">Represents a span.</div></li></ul><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.ExternalSource.html" title="enum rustc_span::ExternalSource">ExternalSource</a></div></li><li><div class="item-name"><a class="enum" href="enum.ExternalSourceKind.html" title="enum rustc_span::ExternalSourceKind">ExternalSourceKind</a></div><div class="desc docblock-short">The state of the lazy external source loading mechanism of a <code>SourceFile</code>.</div></li><li><div class="item-name"><a class="enum" href="enum.FileName.html" title="enum rustc_span::FileName">FileName</a></div><div class="desc docblock-short">Differentiates between real files and common virtual files.</div></li><li><div class="item-name"><a class="enum" href="enum.FileNameDisplayPreference.html" title="enum rustc_span::FileNameDisplayPreference">FileNameDisplayPreference</a></div></li><li><div class="item-name"><a class="enum" href="enum.NonNarrowChar.html" title="enum rustc_span::NonNarrowChar">NonNarrowChar</a></div><div class="desc docblock-short">Identifies an offset of a non-narrow character in a <code>SourceFile</code>.</div></li><li><div class="item-name"><a class="enum" href="enum.RealFileName.html" title="enum rustc_span::RealFileName">RealFileName</a></div></li><li><div class="item-name"><a class="enum" href="enum.SourceFileHashAlgorithm.html" title="enum rustc_span::SourceFileHashAlgorithm">SourceFileHashAlgorithm</a></div></li><li><div class="item-name"><a class="enum" href="enum.SourceFileLines.html" title="enum rustc_span::SourceFileLines">SourceFileLines</a></div></li><li><div class="item-name"><a class="enum" href="enum.SpanLinesError.html" title="enum rustc_span::SpanLinesError">SpanLinesError</a></div></li><li><div class="item-name"><a class="enum" href="enum.SpanSnippetError.html" title="enum rustc_span::SpanSnippetError">SpanSnippetError</a></div></li></ul><h2 id="constants" class="small-section-header"><a href="#constants">Constants</a></h2><ul class="item-table"><li><div class="item-name"><a class="constant" href="constant.DUMMY_SP.html" title="constant rustc_span::DUMMY_SP">DUMMY_SP</a></div><div class="desc docblock-short">Dummy span, both position and length are zero, syntax context is zero as well.</div></li></ul><h2 id="statics" class="small-section-header"><a href="#statics">Statics</a></h2><ul class="item-table"><li><div class="item-name"><a class="static" href="static.SESSION_GLOBALS.html" title="static rustc_span::SESSION_GLOBALS">SESSION_GLOBALS</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="static" href="static.SPAN_TRACK.html" title="static rustc_span::SPAN_TRACK">SPAN_TRACK</a></div></li></ul><h2 id="traits" class="small-section-header"><a href="#traits">Traits</a></h2><ul class="item-table"><li><div class="item-name"><a class="trait" href="trait.HashStableContext.html" title="trait rustc_span::HashStableContext">HashStableContext</a></div><div class="desc docblock-short">Requirements for a <code>StableHashingContext</code> to be used in this crate.</div></li><li><div class="item-name"><a class="trait" href="trait.Pos.html" title="trait rustc_span::Pos">Pos</a></div></li></ul><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.create_default_session_globals_then.html" title="fn rustc_span::create_default_session_globals_then">create_default_session_globals_then</a></div></li><li><div class="item-name"><a class="fn" href="fn.create_default_session_if_not_set_then.html" title="fn rustc_span::create_default_session_if_not_set_then">create_default_session_if_not_set_then</a></div></li><li><div class="item-name"><a class="fn" href="fn.create_session_globals_then.html" title="fn rustc_span::create_session_globals_then">create_session_globals_then</a></div></li><li><div class="item-name"><a class="fn" href="fn.create_session_if_not_set_then.html" title="fn rustc_span::create_session_if_not_set_then">create_session_if_not_set_then</a></div></li><li><div class="item-name"><a class="fn" href="fn.normalize_newlines.html" title="fn rustc_span::normalize_newlines">normalize_newlines</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="desc docblock-short">Replaces <code>\r\n</code> with <code>\n</code> in-place in <code>src</code>.</div></li><li><div class="item-name"><a class="fn" href="fn.normalize_src.html" title="fn rustc_span::normalize_src">normalize_src</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="desc docblock-short">Normalizes the source code and records the normalizations.</div></li><li><div class="item-name"><a class="fn" href="fn.remove_bom.html" title="fn rustc_span::remove_bom">remove_bom</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="desc docblock-short">Removes UTF-8 BOM, if any.</div></li><li><div class="item-name"><a class="fn" href="fn.set_session_globals_then.html" title="fn rustc_span::set_session_globals_then">set_session_globals_then</a></div></li><li><div class="item-name"><a class="fn" href="fn.set_source_map.html" title="fn rustc_span::set_source_map">set_source_map</a></div><div class="desc docblock-short">Insert <code>source_map</code> into the session globals for the duration of the
closure’s execution.</div></li><li><div class="item-name"><a class="fn" href="fn.with_session_globals.html" title="fn rustc_span::with_session_globals">with_session_globals</a></div></li></ul><h2 id="types" class="small-section-header"><a href="#types">Type Aliases</a></h2><ul class="item-table"><li><div class="item-name"><a class="type" href="type.FileLinesResult.html" title="type rustc_span::FileLinesResult">FileLinesResult</a></div></li></ul></section></div></main></body></html>